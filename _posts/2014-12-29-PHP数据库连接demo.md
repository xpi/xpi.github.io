---
layout: post
title: PHP数据库连接demo
categories: [general, demo, sample]
tags: [demo]
description:一个基于PHP连接数据库的通用demo
post_id: 6
---


class MyDB{
 public $host;
 public $usr;
 public $pwd;
 public $dbn;
 public $con;
 /*


 */
 function __construct($host,$usr,$pwd,$dbn){
 
  $this->host=$host;
  $this->usr=$usr;
  $this->pwd=$pwd;
  $this->dbn=$dbn;
  $this->con = mysql_connect($host,$usr,$pwd);
  if (!$this->con){
   die('Could not connect: ' . mysql_error());
  }
  mysql_select_db($dbn,$this->con);
 
 }
 function query($sql){
  $arrs=array();
  $result=mysql_query($sql);
  while($row = mysql_fetch_array($result)){
   $arrs[]=$row;
  }
  return $arrs;
 }
 
}

//测试代码
$db = new MyDB("数据库远程ip地址","用户名","密码","数据库名称");
//查询语句
$result = $db->query("select * from ip_info");

foreach($result as $row ){
 echo $row["ip_addr"]."<br>";
}

